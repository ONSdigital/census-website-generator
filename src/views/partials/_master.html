{% extends "page-templates/_template.njk" %}
{% block head %}
    <script>
        if (!navigator.onLine) {
            console.log('You\'re offline');
            const link  = document.createElement('link');
            link.rel  = 'stylesheet';
            link.href = '/css/census.css';

            document.head.appendChild(link);
        }
    </script>
{% endblock %}

{% set baseUrl = enSite if lang === "cy" else cySite %}
{% if site !== 'ni' %}
    {% set siteBasePath = "/" %}
    {% set currentPath = siteBasePath if type === "home" else '/' + url %}
    {% if hideLanguageToggle.selected !== true %}
        {% set languages =
            {
                "languages": [
                    {
                        "url": baseUrl + localeUrl,
                        "ISOCode": "en",
                        "text": "English",
                        "current": lang === "en",
                        "attributes": {
                            "data-ga-element": 'language'
                        }
                    },
                    {
                        "url": baseUrl + localeUrl,
                        "ISOCode": "cy",
                        "text": "Cymraeg",
                        "current": lang === "cy",
                        "attributes": {
                            "data-ga-element": 'language'
                        }
                    }
                ]
            }
        %}
    {% else %}
        {% set languages = null %}
    {% endif %}
{% else %}
    {% set siteBasePath = "/ni" %}
    {% set currentPath = siteBasePath if type === "home" else siteBasePath + '/' + url %}
    {% set languages = null %}
{% endif %}

{% set page = {
    "cdn": "13.4.5",
    "theme": "census",
    "title": gStrings.siteTitle if type === "home" else title + " - " + gStrings.siteTitle,
    "headMeta": {
        "description": metaData.metaDescription,
        "canonicalUrl": metaData.canonicalUrl
    },
    "header": {
        "title": gStrings.siteTitle,
        "logo": gStrings.orgLogo,
        "logoHref": gStrings.orgUrl,
        "titleLogoHref": "/ni" if site === "ni" else "/",
        "titleLogo": gStrings.censusLogo,
        "titleLogoAlt": gStrings.siteTitle
    },
    "language": languages,
    "toggleButton": {
        "text": gStrings.menuLabel,
        "ariaLabel": "Toggle main navigation"
    },
    "navigation": {
        "id": "main-nav",
        "classes": "nav--inline nav--light nav--header nav--h-m js-main-nav",
        "ariaLabel": "Main menu",
        "ariraListLabel": "Navigation menu",
        "siteBasePath": siteBasePath,
        "currentPath": currentPath,
        "itemsList": navigation
    },
    "footer": {
        "cols": footerLinks,
        "OGLLink": license,
        "attributes": {
            "data-ga-element": 'footer'
        }
    }
} %}
{% block scripts %}
    <script>
        if (!navigator.onLine) {
            const script = document.createElement("script");
            script.src = "/scripts/main.js";
            document.body.appendChild(script);
        }
    </script>
{% endblock %}
