{% extends "page-templates/_template.njk" %}

{% set baseUrl = "http://en.localhost:4040/" if lang === "cy" else "http://cy.localhost:4040/" %}

{% set page = {
    "cdn": "4.0.0",
    "title": "Census 2021" if lang === "en" else "Cyfrifiad 2021",
    "language": {
        "languages": [
            {
                "url": baseUrl + localeUrl,
                "ISOCode": "en",
                "text": "English",
                "current": lang === "en"
            },
            {
                "url": baseUrl + localeUrl,
                "ISOCode": "cy",
                "text": "Cymraeg",
                "current": lang === "cy"
            }
        ]
    },
    "toggleButton": {
        "text": "Menu",
        "ariaLabel": "Toggle main navigation"
    },
    "navigation": {
        "id": "main-nav",
        "classes": "nav--inline nav--light nav--header nav--h-m js-main-nav",
        "ariaLabel": "Main menu",
        "ariraListLabel": "Navigation menu",
        "currentPath": baseUrl + url,
        "itemsList": navigation
    },
    "footer": {
        "cols": footerLinks,
        "OGLLink": license
    }
} %}

{% block scripts %}
    <script type="module" src="https://ons-design-system.netlify.com/scripts/bundle.js"></script>
    {% if analytics_ua_id  %}
        <script nonce="{{ csp_nonce() }}">
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', '{{ analytics_ua_id }}', 'auto');
            ga('set', 'anonymizeIp', true);
            // Language is setup as a custom dimension in google analytics
            ga('set', 'dimension1', '{{ language_code }}' || 'en');
            ga('send', 'pageview');
        </script>
    {% endif %}
{% endblock %}
