{% extends "page-templates/_template.njk" %}
{% block head %}
    <link rel="stylesheet" href="https://ons-design-system.netlify.com/css/responsive.css">
{% endblock %}

{% set baseUrl = "http://en.localhost:4040/" if locale === "cy" else "http://cy.localhost:4040/" %}

{% set page = {
    "title": "Census 2021" if locale === "en" else "Cyfrifiad 2021",
    "language": {
        "languages": [
            {
                "url": baseUrl + localeUrl,
                "ISOCode": "en-GB",
                "text": "English",
                "current": locale === "en"
            },
            {
                "url": baseUrl + localeUrl,
                "ISOCode": "cy",
                "text": "Cymraeg",
                "current": locale === "cy"
            }
        ]
    },
    "navigation": {
        "id": "main-nav",
        "classes": "nav--inline nav--light nav--header nav--h-m js-main-nav",
        "ariaLabel": "Main menu",
        "ariraListLabel": "Navigation menu",
        "currentPath": "/",
        "items": navigation
    },
    "footer": {
        "assetsURL": "http://localhost:3030",
        "cols": [
            {
                "title": "Legal information",
                "items": [
                    {
                        "text": "Cookies and privacy",
                        "url": "/cookies-privacy",
                        "target": "_blank"
                    }
                ]
            },
            {
                "title": "About ONS",
                "items": [
                    {
                        "text": "What we do",
                        "url": "https://www.ons.gov.uk/aboutus/whatwedo",
                        "target": "_blank"
                    },
                    {
                        "text": "Contact us",
                        "url": "/contact-us",
                        "target": "_blank"
                    },
                    {
                        "text": "Accessibility",
                        "url": "https://www.ons.gov.uk/help/accessibility",
                        "target": "_blank"
                    }
                ]
            },
            {
                "title": "Statistics",
                "items": [
                    {
                        "text": "UK Statistics Authority",
                        "url": "https://www.statisticsauthority.gov.uk/about-the-authority/",
                        "target": "_blank"
                    },
                    {
                        "text": "Release calendar",
                        "url": "https://www.ons.gov.uk/releasecalendar",
                        "target": "_blank"
                    },
                    {
                        "text": "News",
                        "url": "https://www.ons.gov.uk/news",
                        "target": "_blank"
                    }
                ]
            }
        ],
        "OGLLink": {
            "pre":  "All content is available under the",
            "link": "Open Government Licence v3.0",
            "url": "https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",
            "post": ", except where otherwise stated"
        }
    }
} %}

{% block scripts %}
    <script type="module" src="https://ons-design-system.netlify.com/scripts/bundle.js"></script>
    {% if analytics_ua_id  %}
        <script nonce="{{ csp_nonce() }}">
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', '{{ analytics_ua_id }}', 'auto');
            ga('set', 'anonymizeIp', true);
            // Language is setup as a custom dimension in google analytics
            ga('set', 'dimension1', '{{ language_code }}' || 'en');
            ga('send', 'pageview');
        </script>
    {% endif %}
{% endblock %}
