{% extends "partials/_master.html" %}
{% from "components/card/_macro.njk" import onsCard %}
{% from "components/hero/_macro.njk" import onsHero %}

{% block page %}
    {{ 
        onsHero(homepage.hero)
    }}
    <div class="page__container container u-pt-l">
        {% for highlight in highlights %}
            {% if loop.index % 3 == 1 %}
            <div class="grid grid--column@xs@s u-mb-m@m">
            {% endif %}
                <div class="grid__col col-4@m">
                    {{-
                        onsCard({
                            "ariaBy": 'Section highlight',
                            "id": highlight.id,
                            "textId": highlight.textId,
                            "title": highlight.title,
                            "url": highlight.url,
                            "text": highlight.text,
                            "itemsList": highlight.itemsList,
                            "attributes": {
                                "data-ga-element": 'card'
                            }
                        })
                    }}
                </div>
            {% if loop.index % 3 == 0 or loop.last %}
            </div>
            {% endif %}
        {% endfor %}
        {% if homepage.helpEntries %}
            <hr>
            <h2 class="u-mt-l u-mb-l">{{ gStrings.homepageHelpTitle }}</h2>
            <div class="grid grid--column@xs@s u-mb-l">
                <div class="grid__col col-6@m">
                    {% for entry in homepage.helpEntries %}
                        {{-
                            onsCard({
                                "ariaBy": 'Case study',
                                "id": entry.id,
                                "textId": entry.textId,
                                "title": entry.title,
                                "url": entry.url,
                                "text": entry.text,
                                "attributes": {
                                    "data-ga-element": 'card'
                                }
                            })
                        }}
                    {% endfor %}
                </div>
                <div class="grid__col push-2@m col-4@m">
                    <div class="u-pl-m@m u-bl@m u-pt-m@xs@s u-bt@xs@s">
                        <h3 class="u-fs-m">{{ requestCode.title }}</h3>
                        {{ requestCode.text | safe }}
                    </div>
                </div>
            </div>
        {% endif %}
        {% if homepage.caseStudies %}
            <hr>
            <h2 class="u-mt-l u-mb-l">{{ gStrings.caseStudyTitle }}</h2>
            <div class="grid grid--column@xs@s u-mb-xl">
                <div class="grid__col col-4@m">
                    <h3>{{ homepage.caseStudies.leftBlockTitle }}</h3>
                    <p>{{ homepage.caseStudies.leftBlockText }}</p>
                    <a href="{{ homepage.caseStudies.leftBlockLink }}">{{ homepage.caseStudies.leftBlockLinkText }}</a>
                </div>
                {% for entry in homepage.caseStudies.entries %}
                    <div class="grid__col col-4@m">
                        {{-
                            onsCard({
                                "ariaBy": 'Case study',
                                "id": entry.id,
                                "textId": entry.textId,
                                "title": entry.title,
                                "url": entry.url,
                                "text": entry.text,
                                "attributes": {
                                    "data-ga-element": 'card'
                                }
                            })
                        }}
                    </div>
                {% endfor %}
            </div>
        {% endif %}
        {% if contact.leftHeading %}
            <hr>
            <div class="grid grid--column@xs@s u-mb-l">
                <div class="grid__col col-6@m">
                    <h2 class="u-mt-l u-mb-m">{{ contact.leftHeading }}</h2>
                    {{ contact.leftBlock | safe }}
                </div>
                <div class="grid__col push-2@m col-4@m">
                    <div class="u-pl-m@m u-bl@m u-pt-m@xs@s u-bt@xs@s">
                        <h2 class="u-mt-l u-mb-m">{{ contact.rightHeading }}</h2>
                        {% if contact.tIconSrc  %}
                            <a href="tLink" class="u-dib u-mr-s"><img width="50" height="50" src="{{ contact.tIconSrc }}" alt="{{ contact.tIconAlt }}"></a>
                        {% endif %}
                        {% if contact.fbIconSrc  %}
                            <a href="fbLink" class="u-dib u-mr-s"><img width="50" height="50" src="{{ contact.fbIconSrc }}" alt="{{ contact.fbIconAlt }}"></a>
                        {% endif %}
                    </div>
                </div>
            </div>
        {% endif %}
    </div>
{% endblock %}
