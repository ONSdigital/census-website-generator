{% extends "partials/_master.html" %}

{% from "components/call-to-action/_macro.njk" import onsCallToAction %}
{% from "components/breadcrumb/_macro.njk" import onsBreadcrumb %}
{% from "components/lists/_macro.njk" import onsList %}
{% from "components/share/_macro.njk" import onsSharePage %}

{% from "macros/localize.njk" import localize %}

{% set entryTitle = title %}
{% set title = questionCategory.title + ": " + title %}

{% block pageContent %}
    {% if not hideCta | length %}
        {% if ctaContent is not null %}
            {{-
                onsCallToAction({
                    "headingText": ctaContent.headingText,
                    "paragraphText": ctaContent.paragraphText,
                    "button": {
                        "text": ctaContent.text,
                        "classes": 'btn--small btn--link',
                        "url": ctaContent.url,
                        "attributes": {
                            "data-ga-element": 'cta-button'
                        }
                    }
                })
            }}
        {% endif %}
    {% endif %}
    <div class="page__container container">
        {{ 
            onsBreadcrumb({
                "ariaLabel": "Back",
                "itemsList": [
                    {
                        "url": parentUrl + "#" + questionCategory.slug,
                        "id": "back",
                        "text": localize(language, "Back")
                    }
                ]
            }) 
        }}

        <div class="grid u-mt-s">
            <div class="grid__col col-7@m">
                <main id="main-content" role="main" class="page__main u-mt-no">
                    <h1 class="u-mb-l">
                        <span class="u-fs-m u-db u-mb-xs u-lighter">{{ questionCategory.title }}</span>
                        <span class="u-vh">: </span>
                        <span class="u-fs-xxl u-db">{{ entryTitle }}</span>
                    </h1>

                    <section class="page__body">
                        {% set pageContent = content %}
                        {% include "partials/pageContent.html" %}

                        <div class="u-mt-l">
                            <p><a href="{{ parentUrl }}#{{ questionCategory.slug }}">Return to {{ questionCategory.title }}</a></p>
                        </div>
                    </section>
                </main>
            </div>

            <div class="grid__col col-3@m push-1@m u-mt-m">

                <div class="related-links">

                    <div class="u-pb-s u-bb">
                        <h2 class="related-links__title u-fs-r--b u-mb-xs" id="related-links-content">{{ localize(language, "Related Content") }}</h2>
                        <nav class="related-links__navigation" aria-labelledby="related-links-content">
                        {{
                            onsList({
                                "classes": "list--bare",
                                "itemsList": relatedLinks
                            })
                        }}
                        </nav>
                    </div>

                    <div class="u-pt-m">
                        {{
                            onsSharePage({
                                "title": localize(language, "Share this post"),
                                "pageTitle": title,
                                "pageURL": entry.url,
                                "facebook": true,
                                "twitter": true
                            })
                        }}
                    </div>
                </div>

            </div>

        </div>
    </div>
{% endblock %}
