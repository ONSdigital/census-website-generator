{% from "components/card/_macro.njk" import onsCard %}

<div class="page__container container u-mt-l">
    <section class="u-pb-m u-mb-m {% if not isLastBlock %} u-bb {% endif%}">
        <h2 class="u-mb-l">{{ block.heading }}</h2>
        <div class="grid grid--column@xxs@s">
            {% if block.subHeading %}
                <div class="grid__col col-4@m">
                    <div class="u-pr-m@m u-mb-l@xxs@m">
                        <h3>{{ block.subHeading}}</h3>
                        <p>{{ block.text }}</p>
                        <a href="{{ block.ctaLink.url }}">{{ block.ctaText }}</a>
                    </div>
                </div>
            {% endif %}
            
            {% for caseStudy in block.caseStudies %}
                <div class="grid__col col-6@s@m col-4@m">
                    {{-
                        onsCard({
                            "ariaBy": "Case study",
                            "id": "casestudy-card-" + caseStudy.entry.id,
                            "textId": "casestudy-text-" + caseStudy.entry.id,
                            "title": caseStudy.entry.title,
                            "url": caseStudy.entry.url,
                            "text": caseStudy.text,
                            "attributes": {
                                "data-ga-element": "card"
                            },
                            "image": {
                                "alt": caseStudy.smallImage.title,
                                "smallSrc": caseStudy.smallImage.url,
                                "largeSrc": caseStudy.largeImage.url
                            }
                        })
                    }}
                </div>
            {% endfor %}
        </div>
    </section>
</div>
